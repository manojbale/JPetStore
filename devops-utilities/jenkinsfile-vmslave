node ('master')
{
    stage('Checkout') {
				
				sh '''git --version'''
				checkout scm
			          }
			


    stage('maven build step') {
				
				sh '''
				mvn --version
				mvn clean install
				'''
				              }
							  
	stage ('move jpetstore.war to docker build workspace') {
				sh '''
				cp -r target/jpetstore.war devops-utilities/
				'''
				                                           }
														   
	stage ('build docker image') {
	            sh '''
				cd devops-utilities/
				docker build -t jpetstore:$BUILD_NUMBER . --file dockerfile-jpetstore-image
				'''
				                }

}
